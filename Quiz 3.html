<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz 3</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            padding: 20px;
        }
        .quiz-container {
            max-width: 850px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #0d6efd, #6610f2);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 { font-size: 1.8rem; }
        .content {
            padding: 40px;
        }
        .question {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
            border-left: 5px solid #0d6efd;
        }
        .question h3 {
            color: #0d6efd;
            font-weight: 600;
            margin-bottom: 15px;
        }
        .option {
            padding: 12px 15px;
            margin: 8px 0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid #e9ecef;
        }
        .option:hover { background: #e3f2fd; border-color: #0d6efd; }
        .option.selected {
            background: #0d6efd;
            color: white;
            border-color: #0d6efd;
        }
        .progress { height: 12px; border-radius: 6px; }
        #result {
            margin-top: 30px;
            padding: 25px;
            border-radius: 15px;
            display: none;
        }
        .score-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
            color: white;
            margin: 20px auto;
        }
        .btn-restart {
            background: #6c757d;
            border: none;
        }
        .btn-restart:hover { background: #5a6268; }
    </style>
</head>
<body>

<div class="quiz-container">
    <div class="header">
        <h1><i class="fas fa-clipboard-check me-2"></i> Evaluación</h1>
        <p class="mb-0">Tema: Diversidad de los Sistemas de Comunicación en Personas Sordociegas</p>
    </div>
    
    <div class="content">
        <div class="alert alert-info">
            <i class="fas fa-info-circle"></i> <strong>Instrucciones:</strong> Selecciona una opción por pregunta. Al final verás tu calificación. <!--<strong>¡Las respuestas correctas no se muestran!</strong>-->
        </div>
        
        <div class="progress mb-4">
            <div class="progress-bar bg-info" role="progressbar" style="width: 0%" id="progress-bar"></div>
        </div>
        
        <form id="quiz-form">
            <!-- Preguntas generadas dinámicamente -->
        </form>
        
        <button id="submit-btn" class="btn btn-lg btn-primary w-100 mt-3">
            <i class="fas fa-paper-plane"></i> Enviar Evaluación
        </button>
        
        <div id="result"></div>
    </div>
</div>

<script>
    const questionsBank = [
        { q: "¿En cuántos grandes grupos se clasifican las personas sordociegas según la lección?", o: ["1", "2", "3", "4"], c: 1 },
        { q: "¿Qué caracteriza al grupo de personas sordociegas de nacimiento o temprana edad?", o: ["Mayor uso de restos visuales", "Problemas de conducta por incomunicación", "Prefieren lectura labial", "No tienen discapacidades añadidas"], c: 1 },
        { q: "¿Por qué las personas con sordoceguera adquirida resisten cambiar de sistema de comunicación?", o: ["Porque no saben que existen otros", "Para mantener su identidad y vida anterior", "Porque es más rápido", "Por orden médica"], c: 1 },
        { q: "¿Qué se recomienda cuando una persona debe cambiar de sistema de comunicación?", o: ["Hacerlo de golpe", "Acompañamiento gradual y anticipado", "No cambiar nunca", "Solo cuando ya no vea nada"], c: 1 },
        { q: "¿En qué consiste fundamentalmente un sistema alfabético?", o: ["Transmisión de ideas completas con una seña", "Deletreo letra por letra", "Uso exclusivo de voz", "Dibujos táctiles"], c: 1 },
        { q: "¿Qué sistema suelen usar primero las personas que perdieron audición antes que visión?", o: ["Tadoma", "Braille manual", "Sistema dactilológico", "Escritura en papel"], c: 2 },
        { q: "¿Cómo recibe la persona sordociega la lengua de señas táctil?", o: ["Mirando de lejos", "Colgando sus manos sobre las del interlocutor", "Escuchando", "Leyendo labios"], c: 1 },
        { q: "¿Qué porcentaje aproximado de información se pierde con lectura labial?", o: ["30%", "50%", "70%", "90%"], c: 2 },
        { q: "¿En qué consiste el método Tadoma?", o: ["Escritura en la palma", "Tacto en cara y garganta para percibir habla", "Señas visuales ampliadas", "Uso de tablillas"], c: 1 },
        { q: "¿Para qué sirven principalmente las tarjetas de comunicación?", o: ["Leer libros", "Emergencias con desconocidos", "Aprender braille", "Juegos"], c: 1 },
        { q: "¿Qué combina el sistema Dactyls?", o: ["Voz y braille", "Dactilológico táctil + elementos de lengua de señas", "Solo dibujos", "Lectura labial + audífonos"], c: 1 },
        { q: "¿Qué estructura básica tiene el sistema Bimodal?", o: ["Lengua de señas pura", "Lengua oral con apoyo de señas", "Braille en pantalla", "Solo escritura"], c: 1 },
        { q: "¿Se usan acentos en los sistemas alfabéticos?", o: ["Sí, siempre", "No, salvo para énfasis", "Solo en braille", "Obligatoriamente"], c: 1 },
        { q: "¿Qué NO se debe imponer drásticamente según el documento?", o: ["Un nuevo sistema de comunicación", "El uso de audífonos", "La lectura de braille", "El uso de tablillas"], c: 0 },
        { q: "¿Qué debe considerar el interlocutor al escribir en papel para persona con restos visuales?", o: ["Solo usar lápiz", "Grosor, contraste, tamaño y separación", "Escribir muy rápido", "Usar colores claros"], c: 1 },
        { q: "¿Qué problemas adicionales presentan las personas sordociegas de nacimiento o temprana edad?", o: ["Ninguno", "Problemas de conducta por incomunicación", "Solo problemas visuales", "Problemas auditivos exclusivos"], c: 1 },
        { q: "¿Por qué las personas con sordoceguera adquirida prefieren usar restos sensoriales deteriorados?", o: ["Para mantener su identidad y vida anterior", "Porque es más fácil", "Por recomendación médica", "Para evitar aprender nuevos sistemas"], c: 0},
        { q: "¿Qué canal usan los sistemas no alfabéticos?", o: ["Canal visual", "Canal auditivo", "Canal táctil", "Canal olfativo"], c: 2}
    ];

    // Seleccionar 10 preguntas aleatorias
    const selectedQuestions = [...questionsBank]
        .sort(() => Math.random() - 0.5)
        .slice(0, 10);

    const form = document.getElementById('quiz-form');
    const progressBar = document.getElementById('progress-bar');

    selectedQuestions.forEach((item, i) => {
        const qDiv = document.createElement('div');
        qDiv.className = 'question';
        qDiv.innerHTML = `<h3>${i + 1}. ${item.q}</h3>`;
        
        item.o.forEach((opt, j) => {
            const label = document.createElement('label');
            label.className = 'option d-block';
            label.innerHTML = `
                <input type="radio" name="q${i}" value="${j}" class="d-none">
                <span>${opt}</span>
            `;
            label.onclick = () => {
                qDiv.querySelectorAll('.option').forEach(el => el.classList.remove('selected'));
                label.classList.add('selected');
                updateProgress();
            };
            qDiv.appendChild(label);
        });
        form.appendChild(qDiv);
    });

    function updateProgress() {
        const answered = document.querySelectorAll('input[type="radio"]:checked').length;
        const percent = (answered / selectedQuestions.length) * 100;
        progressBar.style.width = percent + '%';
    }

    document.getElementById('submit-btn').onclick = () => {
        let correctas = 0;
        selectedQuestions.forEach((item, i) => {
            const selected = form.querySelector(`input[name="q${i}"]:checked`);
            if (selected && parseInt(selected.value) === item.c) {
                correctas++;
            }
        });

        const porcentaje = Math.round((correctas / selectedQuestions.length) * 100);
        const color = porcentaje >= 80 ? '#28a745' : porcentaje >= 60 ? '#ffc107' : '#dc3545';
        const mensaje = porcentaje >= 80 ? '¡Excelente trabajo!' : porcentaje >= 60 ? 'Bien, sigue practicando' : 'Repasa el contenido';

        document.getElementById('result').innerHTML = `
            <div class="text-center">
                <div class="score-circle" style="background: ${color};">
                    ${porcentaje}%
                </div>
                <h2>${correctas} / ${selectedQuestions.length} correctas</h2>
                <p class="lead">${mensaje}</p>
                <button class="btn btn-lg btn-restart text-white">
                    <i class="fas fa-redo"></i> Intentar de nuevo
                </button>
            </div>
        `;
        document.getElementById('result').style.display = 'block';
        document.getElementById('submit-btn').style.display = 'none';
        window.scrollTo(0, document.body.scrollHeight);
    };

    // Reiniciar
    document.addEventListener('click', e => {
        if (e.target.closest('.btn-restart')) {
            location.reload();
        }
    });
</script>

</body>
</html>